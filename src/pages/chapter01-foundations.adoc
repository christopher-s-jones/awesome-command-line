== Foundations

===  Getting Started With the Command Line

The _command line_ is a tool of empowerment--a magic portal to your computer that helps you navigate, organize, create, and refine your files on your computer.  It also helps you automate and manage tasks running on your computer.  When repeatedly clicking and choosing with your mouse becomes tedious, the command line _prompt_ allows you to free yourself and just issue a powerful command that does all that you want, quickly and with ease, so you can get back to the creative side of your work.  You can turn complex tasks that require a series of many steps into one workflow that accomplishes what was once inconvenient.  Each of the major computer operating systems--macOS, Linux, and Windows--all provide ways to use the command line.  While it is an extremely helpful tool on your local desktop or laptop machine, the command line is essential for running remote services, such as a website.  This idea in itself is magical! The Internet predominantly runs on Linux-based servers in remote data centers around the world, and access to these servers largely happens through the command line.  Can you imagine that? Managing computers remotely around the world? Yes! Thank you command line! So, we will be focusing on using the command line locally on your computer and how it can be a boost in your workflow, while laying the groundwork for you to expand your computing skills even further.

This book serves as an introduction to the command line and how to get started with it.  We first get set up with the tools you need to use the command line--a _terminal_ application that knows how to handle your commands.  But wait, you say--What is a _command_?  What is a _terminal_? What is a _prompt_?  In this chapter we introduce these and other concepts in a step by step manner so you have a solid understanding of the terms and lingo needed to use this magic little gem that may be unfamiliar now, but will soon be your trusty friend at your side. In the subsequent chapters we dive in with hands-on learning by highlighting twenty-one essential commands that build your command line foundation.  _Table 1_ lists these commands by the categories covered in each chapter.

.The 21 commands covered in the book, by category.
[%header,cols="^1m,^1m,^1m,^1m,^1m"]
|===
|Navigation{newline}Commands | File{newline}Commands | Folder{newline}Commands | Text Data{newline}Commands | Utility{newline}Commands

|pwd
|echo
|mkdir
|cat
|less 

|man
|touch
|rmdir
|head
|history 

|clear
|mv
|du
|tail
|open 

|cd
|cp
|
|grep
|alias

|ls
|rm 
|
|
|
|===





Each chapter builds on the previous, and we learn a few key concepts that make using the command line ever more powerful.  These concepts include _file paths_, _redirection_, _expansion_, and _pipes_.  However, let's first take a step back and think about the metaphors we use to interact with our computers.

==== The Graphical Desktop Metaphor

When we turn on our computers, we are greeted with beautiful desktop images, icons, windows, menus, a pointer, and other _graphical_ symbols that help us navigate our system and enable our digital creativity.  Collectively, these components are known as the _graphical user interface_, or _GUI_ for short.  We predominantly work with our computers in this manner, and for good reason--it works really well!  So think of the graphical user interface as an analogy, or metaphor, that helps us work with the underlying hardware of our machines--processors, storage drives, memory, etc. For instance, a _folder_ icon on your Desktop represents a collection of _files_, and a _file_ icon represents some data stored on your computer's drive. These metaphors are highly intuitive, but there are times when graphical tools slow us down--usually when you need to work on something repeatedly, remotely, when working with complex or large amounts of data, or when there is currently no way to do what you want using the graphical interface.

==== The Command Line Metaphor

A _command line interface_, or _CLI_, is also a way to work with your computer by means of a metaphor, but in this case we use plain text words and other combinations of characters as symbols to indicate to the computer what you want to accomplish.  Sometimes they resemble English words, other times they are shortened versions of words, or acronyms of multiple words.  For example, a command that we cover in Chapter 2 is `pwd`.  This is just a three-character command that stands for "print working directory".  Here's a quick example:

.Issuing the `pwd` command
[source, console, caption="Example {counter:listing-counter}: "]
----
chris@ophir ~ % pwd
/Users/chris
----

What a little gem!  We'll go into the details of this command later, but you can see that it is a very simple command that shows you what directory (i.e. folder) you are currently working in.  So the combination of those three letters, when typed in an application that knows how to handle them (a terminal), will give you back a result that shows your current folder, all using text-based symbols.

In the remainder of Chapter 1, we will get started with setting up a terminal application  that provides a command line interface for your operating system (macOS, Linux, or Windows).  Once complete, we will open the terminal application, adjust the font family and size so that it is comfortably readable, and then introduce the various components--the _shell_, the _command line_, the _command prompt_, and the various parts of a _command_.  Let's get rolling!

=== Terminal Applications

A computer _terminal_ is merely a way to send input to a computer and receive the output results.  You might also hear the word _console_ used interchangeably with terminal, but the latter is a bit more specific in that it was usually a screen device and keyboard connected directly to a mainframe computer and used by the operators.  Terminals, on the other hand, were historically connected to computers remotely on a network.  We now of course have terminal applications that are considered _virtual terminals_ that emulate these older terminals.  See _A History of Modern Computing_ (2003) by Paul E. Ceruzzi {empty}footnote:[Ceruzzi, Paul E.. A History of Modern Computing. United Kingdom: February, 2003. https://mitpress.mit.edu/9780262532037/a-history-of-modern-computing/] for more background.  There are many alternative applications, but we will start with the basics on each operating system in order to get set up.  For macOS 14, the default application is called _Terminal.app_, and on Windows 11 we will focus on the default _Windows Terminal_.  If you are using Linux, there are of course many distributions available, but we will focus on Ubuntu(R){empty}footnote:[Ubuntu and Canonical are registered trademarks of Canonical Ltd.] 24.04 and the _Gnome Terminal_ that comes packaged with it.  So, skip to the next section that is pertinent to you for your operating system--one of _Setup For macOS_, _setup For Linux_, or _Setup For Windows_&#8212;and we'll get started with a terminal application!

<<<
==== Setup For macOS

If you are on a Mac, Apple has included the Terminal.app since it introduced Mac OS X in 2001, so it has had many years of refinement.  You can search for "Terminal.app" using Apple's Spotlight search by pressing the kbd:[Command]+kbd:[Spacebar] keys at the same time and typing "terminal" (without the quotes) in the search bar. Alternatively you can open a _Finder_ window and navigate to the _Applications_ > _Utilities_ folder to find the Terminal application, as shown in _Figure 1_.  Double click the icon to open the application.

image::chapter-01-macos-choose-terminal-flow.png[title="Open the Terminal.app in the Applications > Utilities folder.",pdfwidth=100%]

===== Adjust the Font Size

That's it! You should see a window open similar to _Figure 2_, althought the default color may be different based on the Appearance settings on your Mac.

image::chapter-01-macos-terminal-window.png[title="A terminal window example on macOS.",pdfwidth=100%]

If you are in Dark Mode, you'll likely see a dark window, and in Light Mode you should see a light window.  In your Dock at the bottom of your screen, you can kbd:[Control] + _click_ on the Terminal icon (or use your _secondary-click_) to bring up the icon menu, and choose _Options_ > _Keep in Dock_ to add it permanently to your Dock.  

To finalize your setup, adjust the font size in your terminal so that you can comfortably see the text.  You can also change the font family, but be sure to use a _fixed width_ font since the terminal expects it for layout purposes.  In order to change the font size, select the _Terminal_ menu item and choose the _Settings ..._ item.  In the Terminal.app Settings window, select the _Basic_ (Default) Profile, and the _Text_ tab in the window panel.  Use the _Change ..._ button to change the font size, as shown in _Figure 3._

image::chapter-01-macos-terminal-settings.png[title="Change the font size as needed in the Terminal.app settings.",pdfwidth=100%]

You are all set! It's that simple to get configured to use the command line on macOS.  You can continue on to the section entitled _The Shell_ to become more acquainted with the command line.

<<<
==== Setup For Linux

Getting set up on Linux is quite easy as well.  On Ubuntu 24.04, the default desktop manager is Gnome. To search for applications, similar to Apple's Spotlight function, press the kbd:[Super] key next to the kbd:[Alt] key on your keyboard.

NOTE: If you are on a Windows-branded machine, the kbd:[Super] key may have the Windows logo on it.  It's also called the kbd:[System] key.  If you have Linux installed on Mac hardware, this is the kbd:[Command] key.

In the search box, type "terminal" (without the quotes), and the default Terminal application icon should be in view.  Click on that icon to open the application.  You're all set! Once open, you may want to right click on the icon in the _Dash_ (i.e. the Application Dock), and choose the _Pin to Dash_ menu item so that you have quick access to the Terminal application.  See _Figure 4_ showing how to search for applications on the Linux Desktop.

image::chapter-01-linux-terminal-search.png[title="Search for the Terminal application on Ubuntu Linux.", pdfwidth=100%]

Great! Now that you have the Terminal application running, you should see a window similar to _Figure 5_.  Your colors may be different depending on your Appearance settings, but you will either see a Light Mode or Dark Mode window.

image::chapter-01-linux-terminal-window.png[title="A terminal window example on Ubuntu Linux.", pdfwidth=100%]

===== Adjust the Font Size

To finalize your setup, adjust the font size in your terminal so that you can comfortably see the text.  You can also change the font family, but be sure to use a _fixed width_ font since the terminal expects it for layout purposes.  In order to change the font size, select the menu button in the top window bar and choose the _Preferences_ item.  In the Terminal Preferences window, select the _Unnamed_ (Default) Profile, and the _Text_ tab in the window panel.  Use the _Custom font_ checkbox and then the font button to change the font size, as shown in _Figure 6._

image::chapter-01-linux-terminal-preferences.png[title="Change the font size as needed in the Terminal preferences.", pdfwidth=100%]

That's it!  It's that simple to get set up to use the command line on Ubuntu Linux.  You can continue on to the section entitled _The Shell_ to become more acquainted with the command line.

<<<
==== Setup For Windows

The Microsoft Windows operating system has a rich history, but one that is diiferent from the Unix-like operating systems of macOS and Linux.  Because of the low-level differences in the systems, Microsoft has created a component called the _Windows Subsytem for Linux_, otherwise known as _WSL_.  WSL provides those of us using Windows an integrated system with a full Linux command line environment.  In this section, we will complete the following list:

[sidebar]
--

. Open the Windows Terminal application as an Administrator.
. Install the Windows Subsystem for Linux component.
- Install a distribution of Ubuntu Linux.
- Restart the computer.
. Enable the Windows Subsystem for Linux required features.
- Restart the computer.
. Set up Ubuntu Linux in Windows Terminal
- Open the Windows Terminal application.
- Open an Ubuntu Linux tab.
- Create a Linux user and password.
. Adjust the terminal font size as needed.

--

After the Windows Subsystem for Linux installation, the Windows Terminal application will have built-in support and integration for WSL, and will give you a full Linux environment to work with.  So let's get started!

===== Open the Windows Terminal Application

Windows Subsystem for Linux is considered a developer tool, and as such, the recommended way to install it is by issuing a command in the terminal application as an Administrator of the computer.  To get started, click on the Windows Start menu icon in the Windows Taskbar, or press the kbd:[Super] key on your keyboard.

NOTE: As mention before, the kbd:[Super] key may have the Windows logo on it, and is usually next to the kbd:[Alt] key.

In the search bar, type "Terminal" (without the quotes).  You should see a search result with the Windows Terminal icon.  As shown in _Figure 7_, choose the _Run as Administrator_ option in the details pane for the Terminal application.

image::chapter-01-windows-search-terminal.png[title="Search for Windows Terminal application and run it as an administrator.", pdfwidth=100%]

When run as an Administrator, you will see a dialog asking you to make changes to your system, so be sure to choose "Yes" to continue.  A terminal window should open and look similar to the window in Figure 8, although the colors may be different depending on your Appearance settings.  The Terminal "Powershell" profile usually defaults to a dark background color.  To keep this application readily available, _right-click_ on the Windows Terminal icon you see in the taskbar, and choose the _Pin to taskbar_ menu item.

===== Install Windows Subsystem for Linux

To install WSL using Windows Terminal, click inside the terminal window and type `wsl --install`, where there is a single space between the `wsl` and the `--install` parts, and press the kbd:[Return] key, as shown in _Figure 8_.  By running this command, Windows will first download the latest version of the Windows Subsystem for Linux component, and will install the component.  It will also install files that are part of the Virtual Machine Platform component that WSL needs for integrating with the operating system.  Once finished, it will prompt you to restart your machine, so do that now.

image::chapter-01-windows-install-wsl.png[title="Run the `wsl --install` command in the Windows Terminal application.", pdfwidth=100%]

===== Enable the Windows Subsystem for Linux Required Features

Once rebooted, you will need to ensure that the WSL components are enabled.  To do so, click on the Windows Start menu icon in the Windows Taskbar, or press the kbd:[Super] key on your keyboard.  In the search bar, type "Turn Windows features" (without the quotes).  As shown in _Figure 9_, you should see a search result with a Control Panel option for "Turn Windows features on or off".  Click on this option to open the features dialog, and scroll down in the dialog toward the bottom.

image::chapter-01-windows-search-features.png[title="Use Windows Search to open the 'Turn Windows Features on or off' Control Panel.", pdfwidth=100%]

As shown in _Figure 10_, ensure that the "Virtual Machine Platform" and the "Windows Subsystem for Linux" items are checked.  After closing this dialog box, Windows will enable these components, and will prompt you to restart your machine.

[.center]
image::chapter-01-windows-enable-features.png[title="Enable the Virtual Machine Platform and Windows Subsystem for Linux components in the Control Panel.", pdfwidth=75%] 

===== Set up Ubuntu Linux in Windows Terminal

Great, the underlying components are now installed! It's now time to set up Ubuntu Linux using the Windows Terminal application.  So, open the Windows Terminal application again, either from your taskbar or the Windows Start menu.  By default, it will open with a Windows PowerShell profile tab.  As shown in _Figure 11_, click on the down-arrow icon next to the '+' icon at the top of the window to open a new tab, and select the Ubuntu profile item.  

[.center]
image::chapter-01-windows-terminal-choose-ubuntu-profile.png[title="Open an Ubuntu Linux profile using the drop-down icon in the Windows Terminal tab bar (next to the + sign.)", pdfwidth=75%] 

This will initiate the Windows Subsystem for Linux, and will start Ubuntu Linux.  It will take a few minutes to initialize, but will then prompt you to create a UNIX username (i.e. Linux username). You can use the same name as your Windows user name, or a different one.  After entering your name, and pressing the kbd:[Return] key, it will then prompt you for a password.  Type in a password of your choosing, and also write it down.

NOTE: As you type in the password field, your typing will not be visible, which is typical behavior for command line password entry.

Confirm your password a second time when prompted, and your Linux environment will be set up for you! Once the text has stopped scrolling in the window, you will have a fully-functional Linux command line, similar to what is shown in _Figure 12_.

image::chapter-01-windows-configure-ubuntu-linux.png[title="A complete Linux command line running within Windows.", pdfwidth=100%]

====== Adjust the Font Size

To finalize your setup, adjust the font size in your terminal so that you can comfortably see the text. You can also change the font family, but be sure to use a fixed width font since the terminal expects it for layout purposes. In order to change the font size, click on the drop-down icon in the tab bar again, and choose the _Settings_ item in the menu.  This opens a new tab in the Windows Terminal with the settings for the application, and the settings for each profile, including the Ubuntu profile.  In the sidebar on the left, scroll down and click on the Ubuntu profile, as shown in _Figure 13_. The Ubuntu profile settings will appear in the right window pane.  Scroll down in this pane, and choose the _Appearance_ section. 

image::chapter-01-windows-terminal-choose-ubuntu-appearance.png[title="To change the font size, first open the Terminal Settings and choose the Ubuntu profile's Appearance section.", pdfwidth=100%]

This opens a dialog that allows you to change the font size as needed. See the example in _Figure 14_ for changing the font size.  Once finished, close the Appearance dialog and click the _Save_ button at the bottom of the Settings tab, as shown in _Figure 14_, and then close the Settings tab.

image::chapter-01-windows-terminal-settings-ubuntu-change-font.png[title="Adjust the font size as needed, and click on the Save button to save the profile changes.", pdfwidth=100%]

Congratulations!  You are ready to continue with your command line journey in the next section to learn about the concept of _The Shell_!

<<<
=== The Shell

Now that you have set up a working terminal application, you are well on your way to using the command line with ease!  To help with some of the terminology, let's first discuss what a _shell_ is.  In the course of your work, someone may say "Open up a terminal", "Open up a console", or "Open up a shell".  As we mentioned before, these terms are often used interchangeably.  However, let's touch on the idea of a shell in more detail.

When you open your terminal application, a number of things happen in the background to set up your environment, such as loading your default settings profile.  As part of this process, the terminal will start another process called a _shell interpreter_, which is a program, running invisibly in the background, that is waiting for your command to be typed. When you do type the command and hit the kbd:[Return] key, the shell program kicks into gear, interprets all of the text that you entered, and runs the command like a programming language.  In fact, you are actually writing commands in what is called a _shell language_!

Here's the same example as _Example 1_, but with a comment added to the command:

.Issuing the `pwd` command with a comment
[source, console, caption="Example {counter:listing-counter}: "]
----
chris@ophir ~ % pwd # Issue the pwd command
/Users/chris
----

Notice that the `+pwd+` characters are followed by a space, then a `+#+` hashtag symbol, and then another space and the comment sentence.  The shell interpreter evaluates everything in the command, and validates it based on the shell language rules.  In this case, we just learned that you can issue a command, followed by a `+#+` character and any other written comment, and the shell will ignore them because it knows they are a comment and will proceed to give you back a result.

The take home message here is that the shell interpreter is doing the heavy lifting behind the scenes, and there are many variants of these interpreters. The earliest shell interpreter is attributed to Louis Pouzin in 1964 for the CTSS/Multics operating systemfootnote:[See https://multicians.org/shell.html].Since 1979 the UNIX operating system included the default shell interpreter called `+sh+`, and a free version of it is still the default on Linux and macOS.  That said, there has been immense improvements to shell programming languages since the 1970s, and many different interpreters, with new features, have been written and shipped with various operating systems.  To name a few, there is `+ksh+`, `+csh+`, `+bash+`, and `+zsh+`{empty}footnote:[The Bourne shell (sh) was wriiten by Stephen Bourne at Bell Labs for UNIX and was released in 1979.  Also at Bell Labs, David Korn created Korn Shell (ksh) which was released in 1983 for UNIX. An alternative for sh called CShell (csh) was written by Bill Joy at the University of California Berkeley for BSD Unix, and Brian Fox wrote the Bourne Again Shell (bash), which is an open source rewrite of the Bourne Shell.  In 1990, Paul Falstad released zsh as an open source program.].  On modern versions of Linux, the default shell tends to be `+bash+`, and on macOS it is now `+zsh+`.  For the purposes of this handbook, we'll see that they all work similarly if not identically in some cases.  In the next section, we'll take a closer look at the _command prompt_, but know that the shell interpreter is workhorse behind your magic commands!

=== The Command Prompt

Lorem ipsum odor amet, consectetuer adipiscing elit. At penatibus habitant malesuada tortor ultrices erat. Justo ad fringilla lacus consequat, blandit ut montes. Phasellus turpis euismod fusce curabitur suspendisse taciti. Molestie nunc enim sociosqu ad nostra ex etiam vel parturient. Porta molestie tristique blandit accumsan, pretium egestas fusce. Lobortis eget tristique interdum, nullam primis porta platea.

=== The Parts of a Command

Lorem ipsum odor amet, consectetuer adipiscing elit. At penatibus habitant malesuada tortor ultrices erat. Justo ad fringilla lacus consequat, blandit ut montes. Phasellus turpis euismod fusce curabitur suspendisse taciti. Molestie nunc enim sociosqu ad nostra ex etiam vel parturient. Porta molestie tristique blandit accumsan, pretium egestas fusce. Lobortis eget tristique interdum, nullam primis porta platea.

=== Single Line and Multi-Lined Commands

Lorem ipsum odor amet, consectetuer adipiscing elit. At penatibus habitant malesuada tortor ultrices erat. Justo ad fringilla lacus consequat, blandit ut montes. Phasellus turpis euismod fusce curabitur suspendisse taciti. Molestie nunc enim sociosqu ad nostra ex etiam vel parturient. Porta molestie tristique blandit accumsan, pretium egestas fusce. Lobortis eget tristique interdum, nullam primis porta platea.

<<<
=== Command Line Interfaces are Awesome!

- freedom
- secret functionality
- quantum leaps in productivity
- empowerment
- free yourself
- magic portal

Lorem ipsum odor amet, consectetuer adipiscing elit. At penatibus habitant malesuada tortor ultrices erat. Justo ad fringilla lacus consequat, blandit ut montes. Phasellus turpis euismod fusce curabitur suspendisse taciti. Molestie nunc enim sociosqu ad nostra ex etiam vel parturient. Porta molestie tristique blandit accumsan, pretium egestas fusce. Lobortis eget tristique interdum, nullam primis porta platea.

